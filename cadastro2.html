<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" />
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" />
<body>
    <div class="areaCentro">
        <form class="formulario" action="https://sheetdb.io/api/v1/yyx16sbmdsyzi" method="post" name="formularioIndik">

            <label for="condominio">Condominio</label>
            <input class="awesomplete" list="condominios" id="condominio" name="data[condominio]">
                <datalist id="condominios"> 
                    <option value="AIUKA">
                    <option value="ALAGOINHAS">
                    <option value="ΑΝΑ BASTOS">
                    <option value="ARAÇATUBA">
                    <option value="ARUANA">
                    <option value="AYRES SALDANHA">
                    <option value="BARBACENA">
                    <option value="BOLIVAR">
                    <option value="BRIGITE">
                    <option value="CAMARGO">
                    <option value="CEREJEIRA">
                    <option value="CIPALOS">
                    <option value="CONDADO LUZERNE">
                    <option value="CORAMAR">
                    <option value="DOIS DE AGOSTO">
                    <option value="DOM PEDRO II">
                    <option value="ESTER LANDES">
                    <option value="FRANCO">
                    <option value="HAYA">
                    <option value="ΙΒΙΑΡΑΒΑ">
                    <option value="ITAOBI">
                    <option value="ITAOCA">
                    <option value="JOAQUIM F. BRAGA">
                    <option value="JUPIA">
                    <option value="LELLIS">
                    <option value="LOGAN">
                    <option value="LYGIA">
                    <option value="MACAUBAS">
                    <option value="MIRANTE">
                    <option value="NICÁCIO">
                    <option value="OURO NEGRO AA">
                    <option value="PARAGON">
                    <option value="PORTO BELLO">
                    <option value="RESIDENCIAL ASSUNÇÃO">
                    <option value="RESID. MARIA ANGÉLICA">
                    <option value="RIO ALTO">
                    <option value="ROMULO (2287-9387)">
                    <option value="RONY">
                    <option value="ROYAL STAR">
                    <option value="SALVATERRA">
                    <option value="SANDRA">
                    <option value="SANTA BARBARA">
                    <option value="SISALTLANTICO">
                    <option value="SOL DA LAGOA">
                    <option value="SOLAR 435 (3574-8133)">
                    <option value="S. B. MINAS GERAIS">
                    <option value="S. PRINC. PATRICIA">
                    <option value="THEMIS">
                    <option value="TOULON (2249-7442)">
                    <option value="URARY">
                    <option value="VESTA">
                    <option value="VIVENDAS DA PRAÇA">
                    <option value="WATKINS">
                    <option value="W. P. ALMEIDA">
                </datalist>
            </input>

            <label for="residencia">Resindência</label>
            <input type="text" name="data[residencia]" id="residencia" placeholder="Exemplo:Apart. 301, bloco 2">

            <label for="nome">Nome</label>
            <input type="text" name="data[nome]" id="nome">
            
            <label for="cpf">CPF</label>
            <input type="text" name="data[cpf]" id="cpf" maxlength="14" placeholder="000.000.000-00">
            <small id="cpf-erro" style="color: red; display: none;">CPF inválido</small>

            <label for="whatsapp">Whatsapp</label>
            <input type="text" name="data[whatsapp]" id="whatsapp" maxlength="16" placeholder="(00) 9 0000-0000">

            <label for="email">E-mail</label>
            <input type="email" name="data[email]" id="email">
            <small id="email-erro" style="color: red; display: none;">E-mail inválido</small>

            <button type="submit" id="enviar">Enviar</button>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
    <script>
        const scriptGoogle = "https://script.google.com/macros/s/AKfycbyYfA7RlnbVWj2Lr4svboezKhQKRb0b0RMlt6GLPlNx4ELxrk-WyluP7UcB4QSbzw4w/exec";
        const formulario = document.forms['formulario'];
        /*
            formulario.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            try {
                // Coleta os dados do formulário
                const dadosForm = {
                condominio: formulario.condominio.value,
                residencia: formulario.residencia.value,
                nome: formulario.nome.value,
                cpf: formulario.cpf.value,
                whatsapp: formulario.whatsapp.value,
                email: formulario.email.value
                };

                // Envia os dados
                const resposta = await fetch(scriptGoogle, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(dadosForm).toString()
                });

                const resultado = await resposta.json();
                
                if (resultado.resultado === 'sucesso') {
                alert('Dados enviados com sucesso!');
                formulario.reset();
                } else {
                throw new Error(resultado.detalhes || 'Erro desconhecido');
                }
            } catch (erro) {
                console.error('Erro no envio:', erro);
                alert(`Falha no envio: ${erro.message}`);
            }
            });
        /*
        dadosFormulario.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Captura e converte todos os valores para string
            const condominio = String(document.getElementById('condominio').value);
            const residencia = String(document.getElementById('residencia').value);
            const nome = String(document.getElementById('nome').value);
            const cpf = String(document.getElementById('cpf').value);
            const whatsapp = String(document.getElementById('whatsapp').value);
            const email = String(document.getElementById('email').value);

            // Cria objeto com os valores convertidos
            const dadosConvertidos = {
                condominio: condominio,
                residencia: residencia,
                nome: nome,
                cpf: cpf,
                whatsapp: whatsapp,
                email: email
            };

            // Exibe no console para verificação
            console.log('Dados convertidos para envio:', dadosConvertidos);

            fetch(scriptGoogle, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(dadosConvertidos)
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                }
                throw new Error('Erro na resposta do servidor');
            })
            .then(data => {
                if(data.status === 'sucesso') {
                    alert('Dados enviados com sucesso!');
                    dadosFormulario.reset();
                } else {
                    alert('Erro: ' + (data.mensagem || 'Erro desconhecido'));
                }
            })
            .catch(error => {
                console.error('Erro ao enviar:', error);
                alert('Erro ao conectar com o servidor: ' + error.message);
            });
        });*/

        

    </script>
    
</body>
</html>